<!DOCTYPE HTML>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Testing video (detection) in HTML5</title>
</head>

<body>

<div style="text-align:center">
  <h1>What videos can I play?</h1>

  <video id="video1" width="33%" controls="controls">
    <source src="./video.ogv" type="video/ogg" />
  </video>

  <video id="video2" width="33%" controls="controls">
    <source src="./video.mp4" type="video/mp4" />
  </video>

  <video id="video3" width="33%" controls="controls">
    <source src="./video.webm" type="video/webm" />
  </video>

  <br />

</div>

<div>
  <h4>Video support:</h4>
  <div id="checkVideoResult">
    <p>Click on this button to see your HTML5 video support.</p>
    <button onclick="checkVideo()">Video support summary</button>
  </div>
</div>

<div>
  <h4>GeoLocation (if possible):</h4>
  <div id="geoloc">
    <p>Click on the button to see your global coordinates.</p>
    <button onclick="getLocation()">Show my position!</button>
  </div>
</div>

<script type="text/javascript">

function translate_status(status) {
    return status ? "yes" : "no";
}


function checkVideo() {
    if (!!document.createElement('video').canPlayType) {
	var v_test, ogg_playable, webm_playable, h264_playable;
	var msg_preamble;
	var msg_postamble;

	v_test = document.createElement("video");

	ogg_playable = v_test.canPlayType('video/ogg; codecs="theora, vorbis"');
	h264_playable = v_test.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
	webm_playable = v_test.canPlayType('video/webm; codecs="vp8, vorbis"');

	msg_preamble = "<p>Here is your video support result: <ul> ";
	msg_postamble = "<input type='button' value='Reload Page' onclick='window.location.reload()'>";

	document.getElementById("checkVideoResult").innerHTML =
	    msg_preamble +
	    "<li>Ogg (Theora/Vorbis)= " + translate_status(ogg_playable) + ".</li> " +
	    "<li>H.264 (AVC/AAC)= " + translate_status(h264_playable) + ".</li> " +
	    "<li>WebM (VP8/Vorbis)= " + translate_status(webm_playable) + ".</li> " +
	    "</ul> </p>" +
	    msg_postamble;
    } else {
	var msg_sorry = "<p>Sorry. No video support at all.</p>" + msg_postamble;
	document.getElementById("checkVideoResult").innerHTML = msg_sorry;
    }
}

function getLocation() {
    var x = document.getElementById("geoloc");
    var msg_postamble = "<input type='button' value='Reload Page' onclick='window.location.reload()'>";

    function showPosition(position) {
	x.innerHTML =
	    "<p>Latitude: " +
	    position.coords.latitude +
	    "<br />Longitude: " + position.coords.longitude + "</p>" +
	    msg_postamble;
    }

    if (navigator.geolocation) {
	navigator.geolocation.getCurrentPosition(showPosition);
    } else {
	x.innerHTML = "<p>Geolocation is not supported by this browser.</p>" +
            msg_postamble;
    }
}
</script>
</body>
</html>
